services:
  - docker

jobs:
  include:
    - stage: Update
      script:
      - sha=$(git rev-parse --short HEAD) && sed -i -e "s/SHA_COMMIT/${sha}/" git-commit.json
    - stage: Test
      script:
      - echo "Test stage"
      - cat git-commit.json
    - stage: Build
      script: 
      - echo "Build stage"
    - stage: Deploy
      script:
      - echo "Deploy stage"
      